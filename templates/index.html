<!DOCTYPE html>
<html>
<head>
    <title>Thousand的聊天室</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <script src="//cdn.bootcdn.net/ajax/libs/socket.io/4.7.5/socket.io.min.js"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/emoji-picker-element@^1/index.js"></script>
</head>

<body>
    <h1 id="pageTitle">聊天室</h1>

    <!-- 登录区 -->
    <div id="loginArea">
        <input id="login_user" placeholder="用户名">
        <input id="login_pass" type="password" placeholder="密码">
        <div class="login-btn-group">
            <button onclick="login()">登录</button>
            <button onclick="showRegister()">注册</button>
        </div>
        <div id="loginMsg"></div>
    </div>

    <!-- 注册区（初始隐藏） -->
    <div id="registerArea" style="display:none">
        <input id="reg_user" placeholder="新用户名">
        <input id="reg_pass" type="password" placeholder="新密码">
        <div class="register-btn-group">
            <button onclick="register()">提交注册</button>
            <button onclick="showLogin()">返回登录</button>
        </div>
        <div id="registerMsg"></div>
    </div>

    <!-- 聊天主面板（合并消息和输入，初始隐藏） -->
    <div id="chatPanel" class="chat-panel" style="display:none">
        <div id="messages"></div>
        <div id="inputGroup">
            <textarea id="myMessage" autocomplete="off" placeholder="输入消息，Enter发送，Shift+Enter换行..." rows="4"></textarea>
            <div class="input-buttons">
                <button id="emojiBtn" onclick="toggleEmojiPicker()">😊</button>
                <button onclick="sendMessage()" id="sendBtn">发送</button>
            </div>
            <!-- 使用emoji-picker-element库 -->
            <emoji-picker id="emojiPicker"></emoji-picker>
        </div>
    </div>

    <script src="{{ url_for('static', filename='chat.js') }}"></script>
</body>
</html>